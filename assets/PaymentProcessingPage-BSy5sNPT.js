import{c as y,u as C,e as S,f as g,r as n,O as r,j as e}from"./index-3RDIFUUU.js";import{u as w}from"./useOrder-HFJ1mVzI.js";import{C as j}from"./circle-x-D8KQaTra.js";import{C as E}from"./circle-check-DQDn0_eN.js";const O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],v=y("refresh-cw",O),s={POLLING:"polling",SUCCESS:"success",FAILED:"failed",TIMEOUT:"timeout"},I=()=>{const t=C(),c=S(),[d]=g(),{pollOrderStatus:m,stopPolling:x}=w(),a=d.get("order_id")||c.state?.orderId,[i,u]=n.useState(s.POLLING),[p,b]=n.useState(0),h=n.useRef(!1);return n.useEffect(()=>{if(!(!a||h.current))return h.current=!0,m(a,{onUpdate:f=>{b(N=>N+1)},onSuccess:()=>{u(s.SUCCESS),setTimeout(()=>{t(r.ORDER_SUCCESS,{state:{orderId:a}})},1500)},onFail:f=>{u(f?.timedOut?s.TIMEOUT:s.FAILED)}}),()=>x()},[a,t,m,x]),a?i===s.POLLING?e.jsxs(l,{children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-100"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[#009661] border-t-transparent animate-spin"}),e.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-2xl",children:"ðŸ’³"})]}),e.jsx("h1",{className:"mt-6 text-xl font-bold text-slate-800",children:"Confirming your payment"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Please don't close this windowâ€¦"}),p>3&&e.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"This is taking a moment. Hang tight."})]}):i===s.SUCCESS?e.jsxs(l,{children:[e.jsx(E,{className:"w-16 h-16 text-[#009661] mx-auto"}),e.jsx("h1",{className:"mt-4 text-xl font-bold text-slate-800",children:"Payment Confirmed!"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Redirecting to your orderâ€¦"})]}):i===s.FAILED?e.jsxs(l,{children:[e.jsx(j,{className:"w-14 h-14 text-red-400 mx-auto"}),e.jsx("h1",{className:"mt-4 text-xl font-bold text-slate-800",children:"Payment Failed"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2 max-w-xs mx-auto",children:"Your payment could not be completed. No money was charged."}),e.jsx(o,{onClick:()=>t(r.CHECKOUT),primary:!0,children:"Try Again"}),e.jsx(o,{onClick:()=>t(r.ORDERS),children:"View Orders"})]}):e.jsxs(l,{children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-amber-50 border-2 border-amber-200 flex items-center justify-center mx-auto",children:e.jsx(v,{className:"w-7 h-7 text-amber-500"})}),e.jsx("h1",{className:"mt-4 text-xl font-bold text-slate-800",children:"Still processingâ€¦"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2 max-w-xs mx-auto",children:"We couldn't confirm your payment automatically. Check your order status â€” it may still succeed."}),e.jsx(o,{onClick:()=>t(r.ORDER_DETAIL(a)),primary:!0,children:"Check Order Status"}),e.jsx(o,{onClick:()=>t(r.ORDERS),children:"My Orders"})]}):e.jsxs(l,{children:[e.jsx(j,{className:"w-14 h-14 text-red-400 mx-auto"}),e.jsx("h1",{className:"mt-4 text-xl font-bold text-slate-800",children:"Invalid session"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Could not find your order."}),e.jsx(o,{onClick:()=>t(r.ORDERS),children:"My Orders"})]})},l=({children:t})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-xl p-10 text-center max-w-sm w-full",children:t})}),o=({children:t,onClick:c,primary:d})=>e.jsx("button",{onClick:c,className:`mt-3 w-full py-3 rounded-xl font-semibold text-sm transition-all
      ${d?"bg-[#009661] text-white hover:bg-[#007d51] shadow-md shadow-emerald-100":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:t});export{I as default};
