import{c as k,u as v,C as O,j as e,g as w,O as R,r as m,h as u,i as l,k as S,L as j}from"./index-3RDIFUUU.js";import{u as L}from"./useOrder-HFJ1mVzI.js";import{O as D}from"./OrderStatusBadge-uU-b6ILi.js";import{A as I}from"./arrow-left-C6LBbUPJ.js";const A=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],T=k("chevron-right",A),_=({order:t,onCancel:n})=>{const o=v(),a=t.items?.[0],d=(t.items?.length??0)-1,c=a?.productSnapshot?.name||a?.product?.name||"Item",x=a?.productSnapshot?.imageUrl||a?.product?.imageUrl,r=new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),b=O.includes(t.orderStatus);return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 hover:border-slate-300 hover:shadow-sm transition-all cursor-pointer",onClick:()=>o(R.ORDER_DETAIL(t.orderId)),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-slate-100 flex-shrink-0 overflow-hidden",children:x?e.jsx("img",{src:x,alt:c,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-slate-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-semibold text-slate-800 text-sm truncate",children:[c,d>0&&e.jsxs("span",{className:"text-slate-500 font-normal",children:[" ","+ ",d," more"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["#",t.orderId]})]}),e.jsx(T,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsx(D,{status:t.orderStatus,size:"sm"}),e.jsxs("span",{className:"font-bold text-slate-900 text-sm",children:["₹",t.totalAmount?.toFixed(2)]})]}),e.jsx("p",{className:"text-[11px] text-slate-400 mt-2",children:r})]})]}),b&&n&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:e.jsx("button",{onClick:i=>{i.stopPropagation(),n(t.orderId)},className:"text-xs font-semibold text-red-500 hover:text-red-600 transition-colors",children:"Cancel Order"})})]})},P=[{key:"",label:"All"},{key:l.PENDING,label:u[l.PENDING]},{key:l.CONFIRMED,label:u[l.CONFIRMED]},{key:l.OUT_FOR_DELIVERY,label:"On the way"},{key:l.DELIVERED,label:u[l.DELIVERED]},{key:l.CANCELLED,label:u[l.CANCELLED]}],z=()=>{const t=v(),{orders:n,pagination:o,loading:a,error:d,fetchOrders:c,cancelOrder:x}=L(),[r,b]=m.useState(""),[i,p]=m.useState(1),[g,f]=m.useState(null),[h,N]=m.useState("");m.useEffect(()=>{c({page:i,limit:10,status:r||void 0})},[r,i,c]);const y=s=>{b(s),p(1)},C=async()=>{h.trim()&&(await x(g,h.trim()),f(null),N(""),c({page:i,limit:10,status:r||void 0}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 py-8 px-4",children:[e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-xl hover:bg-white/80 transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-slate-600"})}),e.jsx("h1",{className:"text-2xl font-black text-slate-900",children:"My Orders"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-5 scrollbar-hide",children:P.map(s=>e.jsx("button",{onClick:()=>y(s.key),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-semibold transition-all border
                ${r===s.key?"bg-[#009661] text-white border-[#009661] shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-slate-300"}`,children:s.label},s.key))}),d&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-xl px-4 py-3 flex items-center gap-3 text-red-700",children:[e.jsx(S,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),a&&n.length===0&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-[#009661]"})}),!a&&n.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[e.jsx(w,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("h2",{className:"font-bold text-slate-700 text-lg",children:"No orders yet"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:r?"No orders with this status.":"You haven't placed any orders yet."}),!r&&e.jsx("button",{onClick:()=>t("/products"),className:"mt-6 px-6 py-2.5 bg-[#009661] text-white rounded-xl font-semibold text-sm hover:bg-[#007d51] transition-all",children:"Start Shopping"})]}),n.length>0&&e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsx(_,{order:s,onCancel:E=>f(E)},s._id||s.orderId))}),o&&o.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[e.jsx("button",{disabled:i===1||a,onClick:()=>p(s=>s-1),className:`px-4 py-2 rounded-xl bg-white border border-slate-200 text-sm font-semibold
                disabled:opacity-40 hover:bg-slate-50 transition-all`,children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:[i," / ",o.totalPages]}),e.jsx("button",{disabled:!o.hasMore||a,onClick:()=>p(s=>s+1),className:`px-4 py-2 rounded-xl bg-white border border-slate-200 text-sm font-semibold
                disabled:opacity-40 hover:bg-slate-50 transition-all`,children:"Next"})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Cancel Order?"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1 mb-4",children:"Please tell us why you want to cancel."}),e.jsx("textarea",{className:"w-full border border-slate-200 rounded-xl p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-[#009661] focus:border-transparent",rows:3,placeholder:"Reason for cancellation…",value:h,onChange:s=>N(s.target.value)}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{f(null),N("")},className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-700 font-semibold text-sm hover:bg-slate-200 transition-all",children:"Keep Order"}),e.jsxs("button",{disabled:!h.trim()||a,onClick:C,className:`flex-1 py-3 rounded-xl bg-red-500 text-white font-semibold text-sm
                  hover:bg-red-600 transition-all disabled:opacity-50 flex items-center justify-center gap-2`,children:[a&&e.jsx(j,{className:"w-4 h-4 animate-spin"}),"Cancel Order"]})]})]})})]})};export{z as default};
